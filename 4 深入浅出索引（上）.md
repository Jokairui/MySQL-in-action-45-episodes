## 4 深入浅出索引（上）

#### 常用的索引模型

对于一个数据库的索引的分析，只需要专注于它索引的数据模型即可

* 哈希表
* 有序数组
* 二叉树
* N叉树
* 跳表
* LSM树

#### INNODB的索引模型

在INNODB中，表都是根据主键顺序以索引的形式存放的，这种存储方式称为索引组织表

INNODB使用的是B+数的索引模型

#####索引的分类

根据索引树叶子结点存储的内容的差异，索引分为**主键索引/聚簇索引**（clustered index）和**普通索引/二级索引**（secondary index）

前者的叶子结点key为ID，value为整行的内容

后者的叶子结点key为索引列的值，value为索引列的值

##### 回表

先从二级索引获取ID值，再到主键索引查出具体行的内容的这个过程，称为回表



#### 索引的维护

主要是维护B+树

##### 页分裂

当一个结点已经存满，再添加一个新值，则数据页分裂成两个使用率约50%的新数据页

##### 页合并

当删除一个值时，两个使用率较低的数据页合并成一个数据页



**页分裂和合并都会对性能产生影响，所以自增主键的好处就是，所有的索引新增都是追加操作，不会产生页分裂而影响性能**

**其次，自增主键一般情况下占用空间更小，可以使得其它的索引叶子结点占用的空间更少**









